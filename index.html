<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>WinBeta | The Super App</title>
    <link href="https://fonts.googleapis.com/css2?family=Clash+Display:wght@500;600;700&family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* --- 1. DESIGN SYSTEM & VARS --- */
        :root {
            /* Palette */
            --bg: #020617;
            --surface: #0f172a;
            --surface-2: #1e293b;
            --surface-3: #334155;
            
            --primary: #10B981;
            --primary-dim: rgba(16, 185, 129, 0.15);
            --primary-dark: #047857;
            
            --accent: #F59E0B;
            --accent-dim: rgba(245, 158, 11, 0.15);
            
            --danger: #EF4444;
            --danger-dim: rgba(239, 68, 68, 0.15);
            
            --info: #3B82F6;
            --success: #22C55E;
            
            --text: #F8FAFC;
            --text-muted: #94A3B8;
            --border: #1e293b;
            
            /* Spacing & Layout */
            --nav-height: 75px;
            --header-height: 65px;
            --radius-sm: 8px;
            --radius-md: 16px;
            --radius-lg: 24px;
            --radius-full: 9999px;
            
            /* Animation */
            --ease: cubic-bezier(0.23, 1, 0.32, 1);
            --fast: 200ms var(--ease);
        }

        /* Reset */
        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; outline: none; user-select: none; }
        html, body { height: 100%; width: 100%; overflow: hidden; background: var(--bg); color: var(--text); font-family: 'Plus Jakarta Sans', sans-serif; }
        h1, h2, h3, .brand { font-family: 'Clash Display', sans-serif; letter-spacing: 0.5px; }
        button { cursor: pointer; font-family: inherit; border: none; background: none; }
        a { text-decoration: none; color: inherit; }

        /* --- 2. UTILITY CLASSES (Micro-Framework) --- */
        
        /* Layout */
        .flex { display: flex; }
        .flex-col { flex-direction: column; }
        .items-center { align-items: center; }
        .justify-between { justify-content: space-between; }
        .justify-center { justify-content: center; }
        .justify-end { justify-content: flex-end; }
        .gap-1 { gap: 5px; } .gap-2 { gap: 10px; } .gap-3 { gap: 15px; } .gap-4 { gap: 20px; }
        .w-full { width: 100%; } .h-full { height: 100%; }
        .relative { position: relative; } .absolute { position: absolute; } .fixed { position: fixed; }
        .z-10 { z-index: 10; } .z-50 { z-index: 50; } .z-100 { z-index: 100; } .z-modal { z-index: 999; }

        /* Spacing */
        .p-2 { padding: 10px; } .p-3 { padding: 15px; } .p-4 { padding: 20px; } .p-5 { padding: 25px; }
        .px-3 { padding-left: 15px; padding-right: 15px; } .px-4 { padding-left: 20px; padding-right: 20px; }
        .py-2 { padding-top: 10px; padding-bottom: 10px; }
        .m-2 { margin: 10px; } .mb-2 { margin-bottom: 10px; } .mb-4 { margin-bottom: 20px; } .mb-6 { margin-bottom: 30px; }
        .mt-2 { margin-top: 10px; } .mt-4 { margin-top: 20px; }

        /* Typography */
        .text-xs { font-size: 0.75rem; } .text-sm { font-size: 0.875rem; } .text-base { font-size: 1rem; }
        .text-lg { font-size: 1.125rem; } .text-xl { font-size: 1.25rem; } .text-2xl { font-size: 1.5rem; } .text-4xl { font-size: 2.5rem; }
        .font-bold { font-weight: 700; } .font-semibold { font-weight: 600; }
        .text-center { text-align: center; }
        .text-muted { color: var(--text-muted); }
        .text-primary { color: var(--primary); } .text-accent { color: var(--accent); } .text-danger { color: var(--danger); }
        .truncate { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

        /* Decorations */
        .bg-surface { background: var(--surface); } .bg-surface-2 { background: var(--surface-2); }
        .rounded-sm { border-radius: var(--radius-sm); } .rounded-md { border-radius: var(--radius-md); } 
        .rounded-lg { border-radius: var(--radius-lg); } .rounded-full { border-radius: var(--radius-full); }
        .border { border: 1px solid var(--border); }
        .shadow-lg { box-shadow: 0 10px 30px -10px rgba(0,0,0,0.5); }
        .opacity-50 { opacity: 0.5; }

        /* Gradients & Effects */
        .text-gradient { background: linear-gradient(135deg, #10B981 0%, #3B82F6 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .glass { background: rgba(15, 23, 42, 0.7); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); }
        .card-hover { transition: transform var(--fast); } .card-hover:active { transform: scale(0.98); }

        /* --- 3. COMPONENTS --- */

        /* Buttons */
        .btn {
            display: flex; align-items: center; justify-content: center; gap: 8px;
            width: 100%; padding: 14px; font-weight: 600; font-size: 0.95rem;
            border-radius: var(--radius-md); transition: var(--fast);
        }
        .btn:active { transform: scale(0.96); opacity: 0.9; }
        .btn-primary { background: var(--primary); color: #000; box-shadow: 0 4px 15px var(--primary-dim); }
        .btn-accent { background: var(--accent); color: #000; box-shadow: 0 4px 15px var(--accent-dim); }
        .btn-outline { border: 1px solid var(--border); color: var(--text); background: transparent; }
        .btn-danger { background: var(--danger-dim); color: var(--danger); }
        .btn-icon { width: 40px; height: 40px; border-radius: 50%; padding: 0; font-size: 1.1rem; }
        .btn-sm { padding: 8px 16px; font-size: 0.85rem; width: auto; }

        /* Inputs */
        .input-group { position: relative; width: 100%; margin-bottom: 15px; }
        .input {
            width: 100%; background: var(--surface); border: 1px solid var(--border);
            padding: 16px; border-radius: var(--radius-md); color: var(--text);
            font-size: 1rem; transition: border-color 0.2s;
        }
        .input:focus { border-color: var(--primary); box-shadow: 0 0 0 4px var(--primary-dim); }
        .label { position: absolute; top: -8px; left: 12px; background: var(--bg); padding: 0 4px; font-size: 0.75rem; color: var(--text-muted); }

        /* Cards */
        .card {
            background: var(--surface); border: 1px solid var(--border); border-radius: var(--radius-lg);
            overflow: hidden; position: relative;
        }
        .card-img { width: 100%; height: 160px; object-fit: cover; background: var(--surface-2); }
        .tag {
            position: absolute; top: 10px; left: 10px; padding: 4px 10px;
            font-size: 0.7rem; font-weight: 800; text-transform: uppercase; border-radius: 6px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }
        .tag.pool { background: var(--primary); color: #000; }
        .tag.auction { background: var(--accent); color: #000; }
        .tag.buy { background: var(--info); color: #fff; }

        /* Nav */
        .nav-bar {
            height: var(--nav-height); border-top: 1px solid var(--border);
            position: fixed; bottom: 0; left: 0; width: 100%; z-index: 50;
            display: grid; grid-template-columns: repeat(5, 1fr);
            background: rgba(2, 6, 23, 0.95); backdrop-filter: blur(10px);
            padding-bottom: env(safe-area-inset-bottom);
        }
        .nav-item {
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            color: var(--text-muted); transition: color 0.2s; font-size: 0.7rem; gap: 4px;
        }
        .nav-item.active { color: var(--text); }
        .nav-item i { font-size: 1.4rem; margin-bottom: 2px; }
        .nav-fab {
            width: 50px; height: 50px; background: var(--text); color: var(--bg);
            border-radius: 50%; display: grid; place-items: center;
            margin-top: -25px; box-shadow: 0 5px 20px rgba(255,255,255,0.15);
            font-size: 1.4rem;
        }

        /* Scroll Areas */
        .scroll-y { overflow-y: auto; height: 100%; padding-bottom: 100px; -webkit-overflow-scrolling: touch; }
        .scroll-x { overflow-x: auto; display: flex; gap: 10px; padding-bottom: 10px; -webkit-overflow-scrolling: touch; scrollbar-width: none; }

        /* Ticker */
        .ticker-wrap { height: 32px; background: var(--primary); overflow: hidden; display: flex; align-items: center; }
        .ticker { display: flex; animation: ticker 25s linear infinite; white-space: nowrap; }
        .ticker-item { color: #000; font-weight: 700; font-size: 0.8rem; padding: 0 20px; }
        @keyframes ticker { 0% { transform: translateX(0); } 100% { transform: translateX(-100%); } }

        /* Animations */
        .view { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg); display: none; flex-direction: column; z-index: 10; }
        .view.active { display: flex; animation: fadeUp 0.3s var(--ease); }
        .view.overlay { z-index: 60; animation: slideIn 0.3s var(--ease); }
        
        @keyframes fadeUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes slideIn { from { transform: translateX(100%); } to { transform: translateX(0); } }
        @keyframes spin { to { transform: rotate(360deg); } }

        /* UI Elements */
        .toast-container { position: fixed; top: 20px; left: 50%; transform: translateX(-50%); z-index: 200; width: 90%; pointer-events: none; }
        .toast { 
            background: var(--surface-2); border: 1px solid var(--border); padding: 12px 16px; 
            border-radius: var(--radius-md); margin-bottom: 10px; display: flex; align-items: center; gap: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5); animation: fadeUp 0.3s; pointer-events: all;
        }
        
        .modal-backdrop {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8);
            z-index: 150; display: none; align-items: flex-end; backdrop-filter: blur(4px);
        }
        .modal-sheet {
            background: var(--surface); width: 100%; border-radius: 24px 24px 0 0; padding: 25px;
            border-top: 1px solid var(--border); animation: slideUp 0.3s; max-height: 85vh; overflow-y: auto;
        }
        @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }

    </style>
</head>
<body>

    <div id="app-root"></div>
    <div class="toast-container" id="toasts"></div>
    <div class="modal-backdrop" id="modal" onclick="if(event.target === this) UI.modal(false)"></div>
    <canvas id="confetti-canvas" style="position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:200;"></canvas>

<script>
/**
 * WinBeta OS 2.0 (Ultra Edition)
 * A complete Single Page Application architecture in one file.
 * Includes: Store, Router, Component Rendering, Persistence, Logic.
 */

// --- 1. STORE & STATE MANAGEMENT ---
const Store = {
    data: {
        user: null,
        wallet: { balance: 0, currency: 'NGN', transactions: [] },
        items: [],
        cart: [],
        favorites: [],
        notifications: [],
        searchHistory: [],
        settings: { theme: 'dark', push: true, email: true },
        categories: ['Electronics', 'Fashion', 'Vehicles', 'Real Estate', 'Gaming', 'Services'],
        appState: { ready: false }
    },

    init() {
        const saved = localStorage.getItem('winbeta_v2');
        if(saved) {
            this.data = { ...this.data, ...JSON.parse(saved) };
        } else {
            this.seed();
        }
        this.persist();
        
        // Simulated Real-time Updates
        setInterval(() => this.simulateLiveActivity(), 5000);
    },

    persist() {
        localStorage.setItem('winbeta_v2', JSON.stringify(this.data));
    },

    seed() {
        this.data.items = [
            { id: 1, type: 'pool', category: 'Electronics', name: 'iPhone 15 Pro Max', price: 1000, sold: 842, total: 1000, img: 'https://images.unsplash.com/photo-1695048133142-1a20484d2569?w=500', seller: 'AppleStore_NG' },
            { id: 2, type: 'auction', category: 'Fashion', name: 'Rolex Submariner', price: 45000, bids: 14, ends: Date.now() + 7200000, img: 'https://images.unsplash.com/photo-1524592094714-0f0654e20314?w=500', seller: 'LuxuryWatch' },
            { id: 3, type: 'buy', category: 'Electronics', name: 'MacBook Air M2', price: 650000, original: 700000, img: 'https://images.unsplash.com/photo-1517336714731-489689fd1ca4?w=500', seller: 'GadgetWorld' },
            { id: 4, type: 'pool', category: 'Vehicles', name: 'Toyota Camry 2021', price: 5000, sold: 120, total: 2500, img: 'https://images.unsplash.com/photo-1621007947382-bb3c3968e3bb?w=500', seller: 'AutoHub_Abuja' },
            { id: 5, type: 'auction', category: 'Gaming', name: 'PS5 Slim Edition', price: 85000, bids: 28, ends: Date.now() + 3600000, img: 'https://images.unsplash.com/photo-1606144042614-b2417e99c4e3?w=500', seller: 'GamerX' },
            { id: 6, type: 'buy', category: 'Fashion', name: 'Nike Air Jordan 1', price: 45000, original: 60000, img: 'https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=500', seller: 'Kicks_Lagos' }
        ];
        this.data.notifications = [
            { id: 1, title: "Welcome to WinBeta", msg: "Start bidding and winning today!", read: false, time: Date.now() }
        ];
    },

    simulateLiveActivity() {
        // Randomly increase bids or sold count to make app feel alive
        const randomItem = this.data.items[Math.floor(Math.random() * this.data.items.length)];
        if(randomItem.type === 'pool' && randomItem.sold < randomItem.total) {
            randomItem.sold++;
        } else if(randomItem.type === 'auction') {
            randomItem.price += 500;
            randomItem.bids++;
        }
        // If current view is home or product, we might need to re-render, 
        // but for simplicity in this monolithic file, we let the user refresh or navigate to see updates.
        this.persist();
    },

    // Getters
    getById(id) { return this.data.items.find(i => i.id == id); },
    getCartTotal() { 
        return this.data.cart.reduce((acc, item) => {
            const product = this.getById(item.id);
            return acc + (product ? product.price * item.qty : 0);
        }, 0);
    }
};

// --- 2. ROUTER ENGINE ---
const Router = {
    routes: {
        'auth': Views_Auth,
        'home': Views_Home,
        'search': Views_Search,
        'sell': Views_Sell,
        'wallet': Views_Wallet,
        'profile': Views_Profile,
        'product': Views_Product,
        'cart': Views_Cart,
        'settings': Views_Settings,
        'notifications': Views_Notifications
    },
    
    current: null,
    params: {},

    navigate(route, params = {}) {
        this.current = route;
        this.params = params;
        
        // Clear Views
        const root = document.getElementById('app-root');
        const existing = document.getElementById(`view-${route}`);
        
        // Hide all views
        document.querySelectorAll('.view').forEach(el => el.classList.remove('active'));
        
        // Render Logic
        if(existing) {
            // If view exists, just update content if needed (simple re-render for this demo)
            existing.innerHTML = this.routes[route]();
            existing.classList.add('active');
        } else {
            const div = document.createElement('div');
            div.id = `view-${route}`;
            div.className = 'view';
            if(['product', 'cart', 'settings', 'notifications'].includes(route)) div.classList.add('overlay');
            div.innerHTML = this.routes[route]();
            root.appendChild(div);
            
            // Trigger reflow for animation
            setTimeout(() => div.classList.add('active'), 10);
        }

        // Update Nav State
        document.querySelectorAll('.nav-item').forEach(el => {
            el.classList.toggle('active', el.dataset.route === route);
        });
    }
};

// --- 3. ACTIONS (CONTROLLER) ---
const Actions = {
    login(email) {
        if(!email) return UI.toast('Please enter email', 'error');
        UI.loader(true);
        setTimeout(() => {
            Store.data.user = { email, name: email.split('@')[0] };
            Store.persist();
            UI.loader(false);
            Router.navigate('home');
            UI.toast(`Welcome back, ${Store.data.user.name}!`, 'success');
        }, 1000);
    },

    logout() {
        Store.data.user = null;
        Store.persist();
        window.location.reload();
    },

    addToCart(id) {
        const existing = Store.data.cart.find(i => i.id == id);
        if(existing) existing.qty++;
        else Store.data.cart.push({ id, qty: 1 });
        Store.persist();
        UI.toast('Added to Cart', 'success');
        UI.vibrate();
    },

    toggleFavorite(id) {
        const idx = Store.data.favorites.indexOf(id);
        if(idx > -1) {
            Store.data.favorites.splice(idx, 1);
            UI.toast('Removed from Favorites');
        } else {
            Store.data.favorites.push(id);
            UI.toast('Added to Favorites', 'success');
        }
        Store.persist();
        // Re-render if on product page
        if(Router.current === 'product') Router.navigate('product', {id});
    },

    placeBid(id, amount) {
        const item = Store.getById(id);
        if(Store.data.wallet.balance < amount) return UI.toast('Insufficient Balance', 'error');
        if(amount <= item.price) return UI.toast('Bid must be higher', 'error');

        Store.data.wallet.balance -= amount; // Hold funds
        Store.data.wallet.transactions.push({ type: 'debit', amount, desc: `Bid: ${item.name}`, date: Date.now() });
        
        item.price = amount;
        item.bids++;
        
        Store.persist();
        UI.confetti();
        UI.toast('Bid Placed Successfully!', 'success');
        Router.navigate('home');
    },

    buyPoolTicket(id, qty) {
        const item = Store.getById(id);
        const cost = item.price * qty;
        if(Store.data.wallet.balance < cost) return UI.toast('Insufficient Balance', 'error');

        Store.data.wallet.balance -= cost;
        Store.data.wallet.transactions.push({ type: 'debit', amount: cost, desc: `Pool: ${item.name} (x${qty})`, date: Date.now() });
        item.sold += qty;
        
        Store.persist();
        UI.confetti();
        UI.toast(`${qty} Tickets Purchased!`, 'success');
        Router.navigate('home');
    },

    deposit() {
        const amt = 50000;
        Store.data.wallet.balance += amt;
        Store.data.wallet.transactions.push({ type: 'credit', amount: amt, desc: 'Deposit (Bank Transfer)', date: Date.now() });
        Store.persist();
        Router.navigate('wallet');
        UI.confetti();
        UI.toast('Funds Deposited!', 'success');
    },

    spinWheel() {
        const win = Math.floor(Math.random() * 5000);
        Store.data.wallet.balance += win;
        Store.data.wallet.transactions.push({ type: 'credit', amount: win, desc: 'Daily Spin Reward', date: Date.now() });
        Store.persist();
        Router.navigate('wallet');
        UI.toast(`You won â‚¦${win.toLocaleString()}!`, 'success');
    }
};

// --- 4. UI & HELPER FUNCTIONS ---
const UI = {
    toast(msg, type = 'neutral') {
        const box = document.getElementById('toasts');
        const el = document.createElement('div');
        el.className = 'toast';
        const icon = type === 'success' ? 'fa-check-circle text-primary' : type === 'error' ? 'fa-exclamation-circle text-danger' : 'fa-info-circle text-info';
        el.innerHTML = `<i class="fa-solid ${icon}"></i> <span>${msg}</span>`;
        box.appendChild(el);
        setTimeout(() => el.remove(), 3000);
    },

    modal(show, content = '') {
        const el = document.getElementById('modal');
        if(show) {
            el.style.display = 'flex';
            el.innerHTML = `<div class="modal-sheet">${content}</div>`;
        } else {
            el.style.display = 'none';
        }
    },

    loader(show) {
        if(show) {
            const el = document.createElement('div');
            el.id = 'g-loader';
            el.style.cssText = 'position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(2,6,23,0.9);z-index:200;display:grid;place-items:center;';
            el.innerHTML = '<div style="width:40px;height:40px;border:4px solid #333;border-top:4px solid #10B981;border-radius:50%;animation:spin 1s linear infinite"></div>';
            document.body.appendChild(el);
        } else {
            const el = document.getElementById('g-loader');
            if(el) el.remove();
        }
    },

    vibrate() {
        if(navigator.vibrate) navigator.vibrate(15);
    },

    confetti() {
        const c = document.getElementById('confetti-canvas');
        const ctx = c.getContext('2d');
        c.width = window.innerWidth; c.height = window.innerHeight;
        let particles = Array.from({length:100}, () => ({
            x: c.width/2, y: c.height/2, vx: (Math.random()-0.5)*10, vy: (Math.random()-0.5)*10,
            color: `hsl(${Math.random()*360}, 100%, 50%)`, life: 100
        }));
        function draw() {
            ctx.clearRect(0,0,c.width,c.height);
            particles.forEach((p,i) => {
                p.x+=p.vx; p.y+=p.vy; p.life--;
                ctx.fillStyle = p.color; ctx.fillRect(p.x,p.y,5,5);
                if(p.life<=0) particles.splice(i,1);
            });
            if(particles.length) requestAnimationFrame(draw);
        }
        draw();
    }
};

// --- 5. COMPONENT TEMPLATES ---

function Components_Header(title, rightIcon = 'bell') {
    const rightAction = rightIcon === 'bell' ? `Router.navigate('notifications')` : `Router.navigate('settings')`;
    const badge = Store.data.notifications.some(n => !n.read) ? '<div style="position:absolute;top:-2px;right:-2px;width:8px;height:8px;background:red;border-radius:50%;"></div>' : '';
    return `
        <header class="flex justify-between items-center p-4 glass fixed top-0 w-full z-50" style="height:var(--header-height); border-bottom:1px solid var(--border);">
            <div class="brand text-xl">${title}</div>
            <div class="flex items-center gap-3">
                <div class="bg-surface-2 px-3 py-2 rounded-full text-xs font-bold border">â‚¦${Store.data.wallet.balance.toLocaleString()}</div>
                <button onclick="${rightAction}" class="relative btn-icon bg-surface border">
                    <i class="fa-regular fa-${rightIcon}"></i>
                    ${badge}
                </button>
            </div>
        </header>
        <div style="height:var(--header-height)"></div>
    `;
}

function Components_Nav() {
    const active = Router.current;
    const items = [
        { id: 'home', icon: 'house', label: 'Home' },
        { id: 'search', icon: 'magnifying-glass', label: 'Search' },
        { id: 'sell', icon: 'plus', fab: true },
        { id: 'wallet', icon: 'wallet', label: 'Wallet' },
        { id: 'profile', icon: 'user', label: 'Account' }
    ];
    return `
        <nav class="nav-bar">
            ${items.map(i => i.fab ? 
                `<div class="nav-item" onclick="Router.navigate('${i.id}')"><div class="nav-fab"><i class="fa-solid fa-${i.icon}"></i></div></div>` : 
                `<div class="nav-item ${active===i.id?'active':''}" data-route="${i.id}" onclick="Router.navigate('${i.id}')">
                    <i class="fa-solid fa-${i.icon}"></i>${i.label}
                </div>`
            ).join('')}
        </nav>
    `;
}

function Components_Card(item) {
    const sub = item.type === 'pool' ? `${item.sold}/${item.total} sold` : item.type === 'auction' ? `${item.bids} bids` : 'Buy Now';
    return `
        <div class="card card-hover mb-4" onclick="Router.navigate('product', {id: ${item.id}})">
            <div class="tag ${item.type}">${item.type}</div>
            <img src="${item.img}" class="card-img">
            <div class="p-3">
                <div class="flex justify-between mb-2">
                    <div class="text-sm font-semibold truncate w-full">${item.name}</div>
                </div>
                <div class="flex justify-between items-center">
                    <div class="font-bold text-lg">â‚¦${item.price.toLocaleString()}</div>
                    <div class="text-xs text-muted">${sub}</div>
                </div>
            </div>
        </div>
    `;
}

// --- 6. VIEW RENDERERS ---

function Views_Auth() {
    return `
        <div class="flex flex-col justify-center h-full p-5" style="background:radial-gradient(circle at top right, #1e293b 0%, #020617 60%);">
            <div class="mb-6 text-center">
                <h1 class="text-4xl mb-2">Win<span class="text-gradient">Beta</span></h1>
                <p class="text-muted">The Ultimate Marketplace</p>
            </div>
            <div class="input-group">
                <div class="label">Email Address</div>
                <input type="email" id="auth-email" class="input" placeholder="enter your email...">
            </div>
            <div class="input-group">
                <div class="label">Password</div>
                <input type="password" class="input" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
            </div>
            <button class="btn btn-primary mb-4" onclick="Actions.login(document.getElementById('auth-email').value)">Enter App</button>
            <div class="text-center text-xs text-muted">By entering, you agree to our Terms of Service.</div>
        </div>
    `;
}

function Views_Home() {
    const trending = Store.data.items.map(i => Components_Card(i)).join('');
    return `
        <div class="ticker-wrap">
            <div class="ticker">
                <div class="ticker-item">ðŸ”¥ Ahmed just won iPhone 15</div>
                <div class="ticker-item">ðŸ’° New Auction: PS5 Slim starting â‚¦50k</div>
                <div class="ticker-item">ðŸš€ WinBeta v2.0 Live</div>
            </div>
        </div>
        ${Components_Header('Win<span class="text-gradient">Beta</span>')}
        <div class="scroll-y">
            <div class="p-4">
                <div class="scroll-x mb-6">
                    ${Store.data.categories.map(c => `<button class="btn btn-sm btn-outline" style="white-space:nowrap">${c}</button>`).join('')}
                </div>

                <div class="p-4 rounded-lg mb-6 relative overflow-hidden" style="background: linear-gradient(45deg, #10B981, #047857);">
                    <div class="relative z-10">
                        <h2 class="text-xl font-bold mb-1 text-white">Daily Jackpot ðŸŽ°</h2>
                        <p class="text-xs text-white opacity-75 mb-3">Spin the wheel to win credits</p>
                        <button class="btn btn-sm bg-surface text-white border-none" onclick="Actions.spinWheel()">Spin Now</button>
                    </div>
                    <i class="fa-solid fa-coins absolute" style="right:-20px; bottom:-20px; font-size:6rem; opacity:0.2; color:white;"></i>
                </div>

                <h3 class="font-bold mb-4 text-lg">Trending Now</h3>
                <div style="display:grid; grid-template-columns: 1fr 1fr; gap:15px;">
                    ${trending}
                </div>
            </div>
        </div>
        ${Components_Nav()}
    `;
}

function Views_Search() {
    return `
        <div class="p-4 border-bottom">
            <div class="input-group mb-0">
                <input type="text" class="input" placeholder="Search items..." onkeyup="if(this.value.length > 2) UI.toast('Searching mock DB...')">
                <i class="fa-solid fa-magnifying-glass absolute" style="right:15px; top:18px; color:var(--text-muted)"></i>
            </div>
        </div>
        <div class="scroll-y p-4">
            <div class="text-xs font-bold text-muted mb-3 uppercase">Recent Searches</div>
            <div class="flex flex-col gap-2">
                <div class="flex items-center gap-3 p-3 bg-surface rounded-md border">
                    <i class="fa-solid fa-clock-rotate-left text-muted"></i> iPhone 15
                </div>
                <div class="flex items-center gap-3 p-3 bg-surface rounded-md border">
                    <i class="fa-solid fa-clock-rotate-left text-muted"></i> Generator
                </div>
            </div>
        </div>
        ${Components_Nav()}
    `;
}

function Views_Wallet() {
    const txs = Store.data.wallet.transactions.slice().reverse().map(tx => `
        <div class="flex justify-between items-center p-3 border-bottom" style="border-color:rgba(255,255,255,0.05)">
            <div class="flex items-center gap-3">
                <div class="btn-icon bg-surface-2 flex items-center justify-center border text-xs">
                    <i class="fa-solid ${tx.type === 'credit' ? 'fa-arrow-down text-primary' : 'fa-arrow-up'}"></i>
                </div>
                <div>
                    <div class="text-sm font-semibold">${tx.desc}</div>
                    <div class="text-xs text-muted">${new Date(tx.date).toLocaleTimeString()}</div>
                </div>
            </div>
            <div class="font-bold ${tx.type === 'credit' ? 'text-primary' : ''}">
                ${tx.type === 'credit' ? '+' : '-'}â‚¦${tx.amount.toLocaleString()}
            </div>
        </div>
    `).join('');

    return `
        ${Components_Header('Wallet', 'gear')}
        <div class="scroll-y p-4">
            <div class="bg-surface p-5 rounded-lg border text-center mb-6">
                <div class="text-sm text-muted mb-1">Total Balance</div>
                <div class="text-4xl font-bold mb-4">â‚¦${Store.data.wallet.balance.toLocaleString()}</div>
                <div class="flex gap-3">
                    <button class="btn btn-primary" onclick="Actions.deposit()">Deposit</button>
                    <button class="btn btn-outline">Withdraw</button>
                </div>
            </div>
            <h3 class="font-bold mb-3">History</h3>
            <div class="bg-surface rounded-lg border overflow-hidden">
                ${txs || '<div class="p-4 text-center text-muted">No transactions</div>'}
            </div>
        </div>
        ${Components_Nav()}
    `;
}

function Views_Profile() {
    const u = Store.data.user || {name: 'Guest', email: 'guest@winbeta.com'};
    return `
        <div class="p-4 pt-6 text-center">
            <div class="w-full flex justify-end mb-2"><i class="fa-solid fa-gear text-xl" onclick="Router.navigate('settings')"></i></div>
            <div class="w-24 h-24 bg-surface-2 rounded-full mx-auto mb-3 border flex items-center justify-center text-4xl">
                ${u.name[0]}
            </div>
            <h2 class="text-2xl font-bold">${u.name}</h2>
            <p class="text-muted text-sm mb-6">${u.email}</p>
            
            <div class="flex justify-center gap-4 mb-6">
                <div class="bg-surface p-3 rounded-md border w-1/3">
                    <div class="font-bold text-xl">${Store.data.favorites.length}</div>
                    <div class="text-xs text-muted">Saved</div>
                </div>
                <div class="bg-surface p-3 rounded-md border w-1/3">
                    <div class="font-bold text-xl">0</div>
                    <div class="text-xs text-muted">Won</div>
                </div>
            </div>

            <div class="flex flex-col gap-3 text-left">
                <button class="btn btn-outline justify-between" onclick="Router.navigate('cart')">
                    <span><i class="fa-solid fa-cart-shopping mr-2"></i> My Cart</span> <i class="fa-solid fa-chevron-right text-xs"></i>
                </button>
                <button class="btn btn-outline justify-between" onclick="Router.navigate('settings')">
                    <span><i class="fa-solid fa-sliders mr-2"></i> Settings</span> <i class="fa-solid fa-chevron-right text-xs"></i>
                </button>
                <button class="btn btn-danger justify-center mt-4" onclick="Actions.logout()">Log Out</button>
            </div>
        </div>
        ${Components_Nav()}
    `;
}

function Views_Product(params) {
    const item = Store.getById(Router.params.id);
    if(!item) return `<div>Item not found</div>`;
    
    const isFav = Store.data.favorites.includes(item.id);
    
    let actionBtn = '';
    if(item.type === 'pool') actionBtn = `<button class="btn btn-primary" onclick="Actions.buyPoolTicket(${item.id}, 1)">Join Pool (â‚¦${item.price})</button>`;
    else if(item.type === 'auction') actionBtn = `<button class="btn btn-accent" onclick="UI.modal(true, '<div class=\'text-center\'><h3 class=\'mb-4\'>Place Bid</h3><input id=\'bid\' type=\'number\' class=\'input mb-4\' value=\'${item.price+500}\'><button class=\'btn btn-accent\' onclick=\'Actions.placeBid(${item.id}, parseInt(document.getElementById(&quot;bid&quot;).value)); UI.modal(false)\'>Confirm</button></div>')">Place Bid</button>`;
    else actionBtn = `<button class="btn btn-primary" onclick="Actions.addToCart(${item.id})">Add to Cart</button>`;

    return `
        <div class="flex flex-col h-full bg-bg">
            <div class="relative">
                <button onclick="Router.navigate('home')" class="absolute top-4 left-4 btn-icon bg-surface glass z-10"><i class="fa-solid fa-arrow-left"></i></button>
                <img src="${item.img}" class="w-full object-cover" style="height:40vh;">
                <div class="absolute bottom-0 w-full h-24 bg-gradient-to-t from-bg to-transparent"></div>
            </div>
            <div class="p-5 flex-1 relative -mt-6 bg-bg rounded-t-3xl border-t border-white/10">
                <div class="flex justify-between items-start mb-2">
                    <div class="tag ${item.type} relative top-0 left-0 mb-2 inline-block">${item.type}</div>
                    <button class="btn-icon border ${isFav ? 'bg-accent text-black' : 'bg-surface text-muted'}" onclick="Actions.toggleFavorite(${item.id})">
                        <i class="${isFav ? 'fa-solid' : 'fa-regular'} fa-heart"></i>
                    </button>
                </div>
                <h1 class="text-2xl font-bold mb-1">${item.name}</h1>
                <div class="flex items-center gap-2 mb-4">
                    <div class="text-xl font-bold text-primary">â‚¦${item.price.toLocaleString()}</div>
                    <div class="text-xs text-muted">â€¢ ${item.sold || item.bids || 0} engaged</div>
                </div>
                
                <div class="bg-surface p-3 rounded-lg border flex items-center gap-3 mb-6">
                    <div class="w-10 h-10 bg-surface-2 rounded-full"></div>
                    <div>
                        <div class="font-bold text-sm">${item.seller}</div>
                        <div class="text-xs text-muted">Verified Merchant</div>
                    </div>
                </div>

                <p class="text-sm text-muted leading-relaxed mb-6">
                    This item is currently trending. Condition is brand new. Includes full warranty and 7-day return policy.
                </p>

                <div class="fixed bottom-0 left-0 w-full p-4 bg-surface border-t z-50">
                    ${actionBtn}
                </div>
            </div>
        </div>
    `;
}

function Views_Cart() {
    const items = Store.data.cart.map(c => {
        const i = Store.getById(c.id);
        return `<div class="flex justify-between items-center p-3 bg-surface rounded-lg border mb-2">
            <div class="flex items-center gap-3">
                <img src="${i.img}" class="w-12 h-12 rounded object-cover">
                <div>
                    <div class="font-bold text-sm">${i.name}</div>
                    <div class="text-xs text-muted">x${c.qty}</div>
                </div>
            </div>
            <div class="font-bold">â‚¦${(i.price * c.qty).toLocaleString()}</div>
        </div>`;
    }).join('');

    return `
        <div class="flex flex-col h-full">
            <div class="p-4 border-bottom flex items-center gap-3">
                <button onclick="Router.navigate('home')" class="btn-icon border"><i class="fa-solid fa-arrow-left"></i></button>
                <h2 class="font-bold text-lg">Shopping Cart</h2>
            </div>
            <div class="scroll-y p-4 flex-1">
                ${items || '<div class="text-center text-muted mt-10">Cart is empty</div>'}
            </div>
            <div class="p-4 border-t bg-surface">
                <div class="flex justify-between mb-4 font-bold text-lg">
                    <span>Total</span>
                    <span>â‚¦${Store.getCartTotal().toLocaleString()}</span>
                </div>
                <button class="btn btn-primary" onclick="UI.toast('Checkout Simulated!', 'success')">Checkout Now</button>
            </div>
        </div>
    `;
}

function Views_Notifications() {
    return `
        <div class="flex flex-col h-full">
            <div class="p-4 border-bottom flex items-center gap-3">
                <button onclick="Router.navigate('home')" class="btn-icon border"><i class="fa-solid fa-arrow-left"></i></button>
                <h2 class="font-bold text-lg">Notifications</h2>
            </div>
            <div class="scroll-y p-4">
                ${Store.data.notifications.map(n => `
                    <div class="p-3 bg-surface rounded-lg border mb-2 ${n.read ? 'opacity-50' : ''}">
                        <div class="font-bold text-sm mb-1">${n.title}</div>
                        <div class="text-xs text-muted">${n.msg}</div>
                        <div class="text-xs text-muted mt-2 text-right">${new Date(n.time).toLocaleTimeString()}</div>
                    </div>
                `).join('')}
            </div>
        </div>
    `;
}

function Views_Sell() {
    return `
        <div class="p-4">
             <h2 class="text-2xl font-bold mb-4">Sell Item</h2>
             <div class="bg-surface p-4 rounded-lg border">
                <div class="input-group"><div class="label">Item Name</div><input class="input" placeholder="e.g. iPhone 15"></div>
                <div class="input-group"><div class="label">Price</div><input class="input" type="number" placeholder="0.00"></div>
                <div class="p-10 border rounded-lg text-center text-muted mb-4" style="border-style:dashed">
                    <i class="fa-solid fa-camera text-2xl mb-2"></i><br>Upload Photo
                </div>
                <button class="btn btn-primary" onclick="UI.toast('Listing created!', 'success'); Router.navigate('home')">List Item</button>
             </div>
        </div>
        ${Components_Nav()}
    `;
}

function Views_Settings() {
    return `
        <div class="flex flex-col h-full">
            <div class="p-4 border-bottom flex items-center gap-3">
                <button onclick="Router.navigate('profile')" class="btn-icon border"><i class="fa-solid fa-arrow-left"></i></button>
                <h2 class="font-bold text-lg">Settings</h2>
            </div>
            <div class="p-4">
                <div class="bg-surface rounded-lg border overflow-hidden">
                    <div class="p-4 border-bottom flex justify-between items-center">
                        <span>Dark Mode</span>
                        <i class="fa-solid fa-toggle-on text-primary text-2xl"></i>
                    </div>
                    <div class="p-4 border-bottom flex justify-between items-center">
                        <span>Notifications</span>
                        <i class="fa-solid fa-toggle-on text-primary text-2xl"></i>
                    </div>
                    <div class="p-4 flex justify-between items-center">
                        <span>Language</span>
                        <span class="text-muted text-sm">English <i class="fa-solid fa-chevron-right ml-2"></i></span>
                    </div>
                </div>
                <div class="text-center text-xs text-muted mt-6">WinBeta OS v2.0.4 (Build 882)</div>
            </div>
        </div>
    `;
}

// --- 7. BOOTSTRAP ---
Store.init();
if(Store.data.user) Router.navigate('home');
else Router.navigate('auth');

</script>
</body>
</html>
